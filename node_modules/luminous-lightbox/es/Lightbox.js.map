{"version":3,"sources":["../src/js/Lightbox.js"],"names":["isDOMElement","addClasses","removeClasses","throwIfMissing","LEFT_ARROW","RIGHT_ARROW","HAS_ANIMATION","document","createElement","style","Lightbox","options","_sizeImgWrapperEl","bind","showNext","showPrevious","_completeOpen","_completeClose","_handleKeydown","_handleClose","namespace","parentEl","triggerEl","sourceAttribute","caption","includeImgixJSClass","_gallery","_arrowNavigation","closeButtonEnabled","closeTrigger","settings","onClose","TypeError","currentTrigger","openClasses","_buildClasses","openingClasses","closingClasses","hasBeenLoaded","elementBuilt","e","preventDefault","el","addEventListener","closeButtonEl","suffix","classes","ns","push","innerEl","appendChild","loaderEl","imgWrapperEl","positionHelperEl","imgEl","captionEl","_setUpGalleryElements","_updateImgSrc","_updateCaption","classList","add","_buildGalleryButton","name","fn","btn","innerText","stopPropagation","width","clientWidth","maxWidth","height","clientHeight","maxHeight","captionType","innerHTML","imageURL","getAttribute","Error","loadingClasses","onload","setAttribute","keyCode","nextTrigger","previousTrigger","_buildElement","_bindEventListeners","window","removeEventListener","removeChild"],"mappings":"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","sourcesContent":["import { isDOMElement, addClasses, removeClasses } from \"./util/dom\";\nimport throwIfMissing from \"./util/throwIfMissing\";\n\nconst LEFT_ARROW = 37;\nconst RIGHT_ARROW = 39;\n\n// All officially-supported browsers have this, but it's easy to\n// account for, just in case.\nconst HAS_ANIMATION =\n  typeof document === \"undefined\"\n    ? false\n    : \"animation\" in document.createElement(\"div\").style;\n\n/**\n * Represents the default lightbox implementation\n */\nexport default class Lightbox {\n  /**\n   * Constructor\n   * @param {Object=} options Lightbox options\n   */\n  constructor(options = {}) {\n    this._sizeImgWrapperEl = this._sizeImgWrapperEl.bind(this);\n    this.showNext = this.showNext.bind(this);\n    this.showPrevious = this.showPrevious.bind(this);\n    this._completeOpen = this._completeOpen.bind(this);\n    this._completeClose = this._completeClose.bind(this);\n    this._handleKeydown = this._handleKeydown.bind(this);\n    this._handleClose = this._handleClose.bind(this);\n\n    const {\n      namespace = null,\n      parentEl = throwIfMissing(),\n      triggerEl = throwIfMissing(),\n      sourceAttribute = throwIfMissing(),\n      caption = null,\n      includeImgixJSClass = false,\n      _gallery = null,\n      _arrowNavigation = null,\n      closeButtonEnabled = true,\n      closeTrigger = \"click\"\n    } = options;\n\n    this.settings = {\n      namespace,\n      parentEl,\n      triggerEl,\n      sourceAttribute,\n      caption,\n      includeImgixJSClass,\n      _gallery,\n      _arrowNavigation,\n      closeButtonEnabled,\n      onClose: options.onClose,\n      closeTrigger\n    };\n\n    if (!isDOMElement(this.settings.parentEl)) {\n      throw new TypeError(\n        \"`new Lightbox` requires a DOM element passed as `parentEl`.\"\n      );\n    }\n\n    this.currentTrigger = this.settings.triggerEl;\n\n    this.openClasses = this._buildClasses(\"open\");\n    this.openingClasses = this._buildClasses(\"opening\");\n    this.closingClasses = this._buildClasses(\"closing\");\n\n    this.hasBeenLoaded = false;\n    this.elementBuilt = false;\n  }\n\n  /**\n   * Handles closing of the lightbox\n   * @param {!Event} e Event that triggered closing\n   * @return {void}\n   * @protected\n   */\n  _handleClose(e) {\n    if (e && typeof e.preventDefault === \"function\") {\n      e.preventDefault();\n    }\n\n    const onClose = this.settings.onClose;\n    if (onClose && typeof onClose === \"function\") {\n      onClose();\n    }\n  }\n\n  /**\n   * Binds event listeners to the trigger element\n   * @return {void}\n   * @protected\n   */\n  _bindEventListeners() {\n    this.el.addEventListener(this.settings.closeTrigger, this._handleClose);\n    if (this.closeButtonEl) {\n      this.closeButtonEl.addEventListener(\"click\", this._handleClose);\n    }\n  }\n\n  /**\n   * Builds a class list using the namespace and suffix, if any.\n   * @param {string} suffix Suffix to add to each class\n   * @return {!Array<!string>} Class list\n   * @protected\n   */\n  _buildClasses(suffix) {\n    const classes = [`lum-${suffix}`];\n\n    const ns = this.settings.namespace;\n    if (ns) {\n      classes.push(`${ns}-${suffix}`);\n    }\n\n    return classes;\n  }\n\n  /**\n   * Creates the lightbox element\n   * @return {void}\n   * @protected\n   */\n  _buildElement() {\n    this.el = document.createElement(\"div\");\n    addClasses(this.el, this._buildClasses(\"lightbox\"));\n\n    this.innerEl = document.createElement(\"div\");\n    addClasses(this.innerEl, this._buildClasses(\"lightbox-inner\"));\n    this.el.appendChild(this.innerEl);\n\n    const loaderEl = document.createElement(\"div\");\n    addClasses(loaderEl, this._buildClasses(\"lightbox-loader\"));\n    this.innerEl.appendChild(loaderEl);\n\n    this.imgWrapperEl = document.createElement(\"div\");\n    addClasses(this.imgWrapperEl, this._buildClasses(\"lightbox-image-wrapper\"));\n    this.innerEl.appendChild(this.imgWrapperEl);\n\n    const positionHelperEl = document.createElement(\"span\");\n    addClasses(\n      positionHelperEl,\n      this._buildClasses(\"lightbox-position-helper\")\n    );\n    this.imgWrapperEl.appendChild(positionHelperEl);\n\n    this.imgEl = document.createElement(\"img\");\n    addClasses(this.imgEl, this._buildClasses(\"img\"));\n    positionHelperEl.appendChild(this.imgEl);\n\n    this.captionEl = document.createElement(\"p\");\n    addClasses(this.captionEl, this._buildClasses(\"lightbox-caption\"));\n    positionHelperEl.appendChild(this.captionEl);\n\n    if (this.settings.closeButtonEnabled) {\n      this.closeButtonEl = document.createElement(\"div\");\n      addClasses(this.closeButtonEl, this._buildClasses(\"close-button\"));\n      this.el.appendChild(this.closeButtonEl);\n    }\n\n    if (this.settings._gallery) {\n      this._setUpGalleryElements();\n    }\n\n    this.settings.parentEl.appendChild(this.el);\n\n    this._updateImgSrc();\n    this._updateCaption();\n\n    if (this.settings.includeImgixJSClass) {\n      this.imgEl.classList.add(\"imgix-fluid\");\n    }\n  }\n\n  /**\n   * Creates gallery elements such as previous/next buttons\n   * @return {void}\n   * @protected\n   */\n  _setUpGalleryElements() {\n    this._buildGalleryButton(\"previous\", this.showPrevious);\n    this._buildGalleryButton(\"next\", this.showNext);\n  }\n\n  /**\n   * Creates a gallery button\n   * @param {string} name Name of button\n   * @param {!Function} fn Click handler\n   * @return {void}\n   * @protected\n   */\n  _buildGalleryButton(name, fn) {\n    const btn = document.createElement(\"button\");\n    this[`${name}Button`] = btn;\n\n    btn.innerText = name;\n    addClasses(btn, this._buildClasses(`${name}-button`));\n    addClasses(btn, this._buildClasses(\"gallery-button\"));\n    this.innerEl.appendChild(btn);\n\n    btn.addEventListener(\n      \"click\",\n      e => {\n        e.stopPropagation();\n\n        fn();\n      },\n      false\n    );\n  }\n\n  /**\n   * Sizes the image wrapper\n   * @return {void}\n   * @protected\n   */\n  _sizeImgWrapperEl() {\n    const style = this.imgWrapperEl.style;\n    style.width = `${this.innerEl.clientWidth}px`;\n    style.maxWidth = `${this.innerEl.clientWidth}px`;\n    style.height = `${this.innerEl.clientHeight -\n      this.captionEl.clientHeight}px`;\n    style.maxHeight = `${this.innerEl.clientHeight -\n      this.captionEl.clientHeight}px`;\n  }\n\n  /**\n   * Updates caption from settings\n   * @return {void}\n   * @protected\n   */\n  _updateCaption() {\n    const captionType = typeof this.settings.caption;\n    let caption = \"\";\n\n    if (captionType === \"string\") {\n      caption = this.settings.caption;\n    } else if (captionType === \"function\") {\n      caption = this.settings.caption(this.currentTrigger);\n    }\n\n    this.captionEl.innerHTML = caption;\n  }\n\n  /**\n   * Updates image element from the trigger element's attributes\n   * @return {void}\n   * @protected\n   */\n  _updateImgSrc() {\n    const imageURL = this.currentTrigger.getAttribute(\n      this.settings.sourceAttribute\n    );\n\n    if (!imageURL) {\n      throw new Error(\n        `No image URL was found in the ${\n          this.settings.sourceAttribute\n        } attribute of the trigger.`\n      );\n    }\n\n    const loadingClasses = this._buildClasses(\"loading\");\n\n    if (!this.hasBeenLoaded) {\n      addClasses(this.el, loadingClasses);\n    }\n\n    this.imgEl.onload = () => {\n      removeClasses(this.el, loadingClasses);\n      this.hasBeenLoaded = true;\n    };\n\n    this.imgEl.setAttribute(\"src\", imageURL);\n  }\n\n  /**\n   * Handles key up/down events for moving between items\n   * @param {!Event} e Keyboard event\n   * @return {void}\n   * @protected\n   */\n  _handleKeydown(e) {\n    if (e.keyCode == LEFT_ARROW) {\n      this.showPrevious();\n    } else if (e.keyCode == RIGHT_ARROW) {\n      this.showNext();\n    }\n  }\n\n  /**\n   * Shows the next item if in a gallery\n   * @return {void}\n   */\n  showNext() {\n    if (!this.settings._gallery) {\n      return;\n    }\n\n    this.currentTrigger = this.settings._gallery.nextTrigger(\n      this.currentTrigger\n    );\n    this._updateImgSrc();\n    this._updateCaption();\n    this._sizeImgWrapperEl();\n  }\n\n  /**\n   * Shows the previous item if in a gallery\n   * @return {void}\n   */\n  showPrevious() {\n    if (!this.settings._gallery) {\n      return;\n    }\n\n    this.currentTrigger = this.settings._gallery.previousTrigger(\n      this.currentTrigger\n    );\n    this._updateImgSrc();\n    this._updateCaption();\n    this._sizeImgWrapperEl();\n  }\n\n  /**\n   * Opens the lightbox\n   * @return {void}\n   */\n  open() {\n    if (!this.elementBuilt) {\n      this._buildElement();\n      this._bindEventListeners();\n      this.elementBuilt = true;\n    }\n\n    // When opening, always reset to the trigger we were passed\n    this.currentTrigger = this.settings.triggerEl;\n\n    // Make sure to re-set the `img` `src`, in case it's been changed\n    // by someone/something else.\n    this._updateImgSrc();\n    this._updateCaption();\n\n    addClasses(this.el, this.openClasses);\n\n    this._sizeImgWrapperEl();\n    window.addEventListener(\"resize\", this._sizeImgWrapperEl, false);\n\n    if (this.settings._arrowNavigation) {\n      window.addEventListener(\"keydown\", this._handleKeydown, false);\n    }\n\n    if (HAS_ANIMATION) {\n      this.el.addEventListener(\"animationend\", this._completeOpen, false);\n      addClasses(this.el, this.openingClasses);\n    }\n  }\n\n  /**\n   * Closes the lightbox\n   * @return {void}\n   */\n  close() {\n    window.removeEventListener(\"resize\", this._sizeImgWrapperEl, false);\n\n    if (this.settings._arrowNavigation) {\n      window.removeEventListener(\"keydown\", this._handleKeydown, false);\n    }\n\n    if (HAS_ANIMATION) {\n      this.el.addEventListener(\"animationend\", this._completeClose, false);\n      addClasses(this.el, this.closingClasses);\n    } else {\n      removeClasses(this.el, this.openClasses);\n    }\n  }\n\n  /**\n   * Handles animations on completion of opening the lightbox\n   * @return {void}\n   * @protected\n   */\n  _completeOpen() {\n    this.el.removeEventListener(\"animationend\", this._completeOpen, false);\n\n    removeClasses(this.el, this.openingClasses);\n  }\n\n  /**\n   * Handles animations on completion of closing the lightbox\n   * @return {void}\n   * @protected\n   */\n  _completeClose() {\n    this.el.removeEventListener(\"animationend\", this._completeClose, false);\n\n    removeClasses(this.el, this.openClasses);\n    removeClasses(this.el, this.closingClasses);\n  }\n\n  /**\n   * Destroys the lightbox\n   * @return {void}\n   */\n  destroy() {\n    if (this.el) {\n      this.settings.parentEl.removeChild(this.el);\n    }\n  }\n}\n"],"file":"Lightbox.js"}